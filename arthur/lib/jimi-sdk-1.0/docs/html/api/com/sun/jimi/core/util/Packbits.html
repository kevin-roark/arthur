<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Aug 09 16:59:19 PDT 1999 -->
<TITLE>
: Class  Packbits
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/sun/jimi/core/util/P.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/sun/jimi/core/util/PixelGrabber.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Packbits.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.sun.jimi.core.util</FONT>
<BR>
Class  Packbits</H2>
<PRE>
java.lang.Object
  |
  +--<B>com.sun.jimi.core.util.Packbits</B>
</PRE>
<HR>
<DL>
<DT>public class <B>Packbits</B><DT>extends java.lang.Object</DL>

<P>
Packbits compression utility class.<p>
 Contains both unpack and packing method for the Macintosh Packbits compression standard.<p>
 Contains Variation for 16 bit RLE packing used in PICT files.<p>
 Contains a main() method with some test code for the pack unpack methods.
<P>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#Packbits()">Packbits</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#getAllRuns(byte[])">getAllRuns</A></B>(byte[]&nbsp;inb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculate length of every byte run in the input buffer
 and store into runb[] buffer.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#packbits(byte[], byte[])">packbits</A></B>(byte[]&nbsp;inb,
         byte[]&nbsp;outb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compress input buffer using RLE packbits compression.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#unpackbits(byte[], byte[])">unpackbits</A></B>(byte[]&nbsp;inb,
           byte[]&nbsp;outb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Decompress an RLE compressed buffer of bytes as per format as
 described in source or in a document on TIFF packbits compression.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#unpackbits(byte[], int[])">unpackbits</A></B>(byte[]&nbsp;inb,
           int[]&nbsp;outb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variation for 16 bit RLE packing used in PICT files.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#unpackbits(byte[], int, byte[], int, int)">unpackbits</A></B>(byte[]&nbsp;inb,
           int&nbsp;ini,
           byte[]&nbsp;outb,
           int&nbsp;outi,
           int&nbsp;len)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;More general.</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#unpackbits(java.io.DataInputStream, byte[])">unpackbits</A></B>(java.io.DataInputStream&nbsp;in,
           byte[]&nbsp;outb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/sun/jimi/core/util/Packbits.html#unpackbitsLimit(byte[], int, byte[])">unpackbitsLimit</A></B>(byte[]&nbsp;inb,
                int&nbsp;inbLen,
                byte[]&nbsp;outb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variation for PICT - which provides short inb[] for a give outb[]
 This method when it exhausts input byte buffer it clears the remainder
 of the output buffer oub.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" ID="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" ID="TableRowColor">
<TD><CODE>clone, 
equals, 
finalize, 
getClass, 
hashCode, 
notify, 
notifyAll, 
toString, 
wait, 
wait, 
wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="Packbits()"><!-- --></A><H3>
Packbits</H3>
<PRE>
public <B>Packbits</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" ID="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="unpackbits(byte[], int, byte[], int, int)"><!-- --></A><H3>
unpackbits</H3>
<PRE>
public static void <B>unpackbits</B>(byte[]&nbsp;inb,
                              int&nbsp;ini,
                              byte[]&nbsp;outb,
                              int&nbsp;outi,
                              int&nbsp;len)</PRE>
<DL>
<DD>More general. [ not really required so unimplemented at the moment.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>inb</CODE> - input buffer<DD><CODE>ini</CODE> - where compressed data in input buffer starts<DD><CODE>outb</CODE> - start output index<DD><CODE>outi</CODE> - where to uncompress data to in output buffer<DD><CODE>len</CODE> - length of the data after decompression.</DL>
</DD>
</DL>
<HR>

<A NAME="unpackbitsLimit(byte[], int, byte[])"><!-- --></A><H3>
unpackbitsLimit</H3>
<PRE>
public static void <B>unpackbitsLimit</B>(byte[]&nbsp;inb,
                                   int&nbsp;inbLen,
                                   byte[]&nbsp;outb)
                            throws java.lang.ArrayStoreException,
                                   java.lang.ArrayIndexOutOfBoundsException</PRE>
<DL>
<DD>Variation for PICT - which provides short inb[] for a give outb[]
 This method when it exhausts input byte buffer it clears the remainder
 of the output buffer oub.</DL>
<HR>

<A NAME="unpackbits(byte[], byte[])"><!-- --></A><H3>
unpackbits</H3>
<PRE>
public static void <B>unpackbits</B>(byte[]&nbsp;inb,
                              byte[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException</PRE>
<DL>
<DD>Decompress an RLE compressed buffer of bytes as per format as
 described in source or in a document on TIFF packbits compression.

 Worst case for compression is that for every 128 bytes to
 compress 1 extra byte is required to encode as a copy run.
 therefore the input buffer should be large enough to accomodate
 the worst case compression to the output buffer.

 Throws ArrayStoreException if the array is not large enough for the
 unpacked data, which could be caused by corrupt input data or
 the array not be allocated large enough.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>inb</CODE> - input buffer with compressed data<DD><CODE>outb</CODE> - output buffer for decompressed data
 the length of the output buffer must be exact decompressed
 lenght of compressed input.</DL>
</DD>
</DL>
<HR>

<A NAME="unpackbits(byte[], int[])"><!-- --></A><H3>
unpackbits</H3>
<PRE>
public static void <B>unpackbits</B>(byte[]&nbsp;inb,
                              int[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException</PRE>
<DL>
<DD>Variation for 16 bit RLE packing used in PICT files.</DL>
<HR>

<A NAME="unpackbits(java.io.DataInputStream, byte[])"><!-- --></A><H3>
unpackbits</H3>
<PRE>
public static void <B>unpackbits</B>(java.io.DataInputStream&nbsp;in,
                              byte[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException,
                              java.io.IOException</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>in</CODE> - data input stream to read packbits data stream from<DD><CODE>outb</CODE> - byte buffer to place unpacked byte data to.
 It is assumed that unpackbits is called with outb big enough
 for a single sequence of compressed bytes</DL>
</DD>
</DL>
<HR>

<A NAME="getAllRuns(byte[])"><!-- --></A><H3>
getAllRuns</H3>
<PRE>
public static int <B>getAllRuns</B>(byte[]&nbsp;inb)</PRE>
<DL>
<DD>Calculate length of every byte run in the input buffer
 and store into runb[] buffer. Note that the count - 1
 value is stored so data stored ranges from 0 to 127 which
 represents the values 1 to 128.
 e.g
 INPUT:  03 04 05 05 06 07 08 09 09 09
 OUTPUT: 00 00 01 00 00 00 02
 Note that a runlength of > 128 bytes is encoded as
 multiple runs of 128 bytes.
 Writing byte value of 128 into a byte array in java
 actually casts it to a signed value of -128.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>inb</CODE> - raw data to calculate byte runs on<DD><CODE>runs</CODE> - output to contain length of each byterun
				this buffer  must be as long as input buffer
				to handle worst case.</DL>
</DD>
</DL>
<HR>

<A NAME="packbits(byte[], byte[])"><!-- --></A><H3>
packbits</H3>
<PRE>
public static int <B>packbits</B>(byte[]&nbsp;inb,
                           byte[]&nbsp;outb)
                    throws java.lang.ArrayStoreException,
                           java.lang.ArrayIndexOutOfBoundsException</PRE>
<DL>
<DD>Compress input buffer using RLE packbits compression.

 The second part
 of the code passes through the output compressed bytes and converts
 any 2 by replicate runs which are between literal runs into a
 literal run.. [ shit cant do if literal gets > 128 then i have
 start inserting bytes what a suck... ]<DD><DL>
<DT><B>Parameters:</B><DD><CODE>inb</CODE> - input buffer containing bytes to be compressed
				using RLE packbits algorithm. buffer is assumed
				to be completely filled.<DD><CODE>outb</CODE> - output buffer containing compressed data.
				This must be large enough for worst case compression
				of input buffer. [ worst case is 1 additional byte
				for every 128 bytes of input buffer with a minimum
				size of 2 bytes ]<DT><B>Returns:</B><DD>the number of bytes in the output buffer.
			It should not be possible to return a value < 2.

 <pre>
 Example Input buffer.
   03 04 05 05 06 07 08
 Example Stoopid encoding
   01 03 04 -01 05 02 06 07 08
 Example Proper encoding
   06 03 04 05 05 06 07 08
 </pre></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" ID="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT ID="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-summary.html"><FONT ID="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" ID="NavBarCell1Rev"> &nbsp;<FONT ID="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="package-tree.html"><FONT ID="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT ID="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT ID="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" ID="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT ID="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/sun/jimi/core/util/P.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/sun/jimi/core/util/PixelGrabber.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" ID="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Packbits.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" ID="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
